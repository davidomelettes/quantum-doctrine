<?php

use Omelettes\Form\ViewPartialInterface;
use Zend\Form;

$form = $this->form;
$form->setAttributes(array(
    'action' => $this->url(null, array(), array(), true),
    'class'  => $form->getAttribute('name') . ' form-horizontal',
));
$form->prepare();

$labelColWidth = 2;
$inputColWidth = 10;

?>

<?php echo $this->form()->openTag($form); ?>
<?php foreach ($form as $element): ?>
<?php

if ($element instanceof ViewPartialInterface) {
    $partial = $element->getViewPartial();
} elseif ($element instanceof Form\Element\Collection) {
    $partial = 'partial/form/horizontal/collection.phtml';
} elseif ($element instanceof Form\Fieldset) {
    $partial = 'partial/form/horizontal/fieldset.phtml';
} else {
    $partial = 'partial/form/horizontal/group.phtml';
}

?>
<?php echo $this->partial(
    $partial,
    array(
        'element' => $element,
        'labelColWidth' => $labelColWidth,
        'inputColWidth' => $inputColWidth,
    )); ?>
<?php endforeach; ?>
<?php echo $this->form()->closeTag($form); ?>
